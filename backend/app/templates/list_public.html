{% extends "base.html" %}

{% block title %}{{ list.name }} - Border Badge{% endblock %}
{% block description %}{{ list.description or 'A public travel list on Border Badge' }}{% endblock %}

{% block content %}
<section class="page-header">
    <h1 class="page-title">{{ list.name }}</h1>
    {% if list.description %}
    <p class="page-subtitle">{{ list.description }}</p>
    {% endif %}
    <p class="page-meta">
        {% if list.country_name %}{{ list.country_name }}{% endif %}
        {% if list.trip_name %} &middot; {{ list.trip_name }}{% endif %}
    </p>
    <p class="page-meta" style="margin-top: 6px; color: var(--color-text-muted);">
        Public list ¬∑ Anyone with the link can view
    </p>
</section>

<section class="entries-section">
    {% if list.entries %}
    <div class="entries-grid">
        {% for entry in list.entries %}
        {% set entry_url = entry.link if entry.link else ('https://www.google.com/maps/search/?api=1&query=' ~ (entry.latitude|string) ~ ',' ~ (entry.longitude|string) if entry.latitude and entry.longitude else ('https://www.google.com/maps/search/?api=1&query_place_id=' ~ entry.google_place_id if entry.google_place_id else '')) %}
        {% if entry_url %}
        <a href="{{ entry_url }}" target="_blank" rel="noopener noreferrer" class="entry-card-link">
        {% endif %}
        <article class="entry-card{% if entry_url %} entry-card--clickable{% endif %}">
            {% if entry.media_urls and entry.media_urls|length > 0 %}
            <img src="{{ entry.media_urls[0] }}" alt="{{ entry.title }}" class="entry-image" loading="lazy">
            {% else %}
            <div class="entry-image-placeholder">üìç</div>
            {% endif %}
            <div class="entry-content">
                <span class="entry-type">{{ entry.type }}</span>
                <h3 class="entry-title">{{ entry.title }}</h3>
                {% if entry.place_name %}
                <p class="entry-place">{{ entry.place_name }}{% if entry.address %}, {{ entry.address }}{% endif %}</p>
                {% endif %}
                {% if entry.notes %}
                <p class="entry-notes">{{ entry.notes[:200] }}{% if entry.notes|length > 200 %}...{% endif %}</p>
                {% endif %}
            </div>
        </article>
        {% if entry_url %}
        </a>
        {% endif %}
        {% endfor %}
    </div>
    {% else %}
    <div class="container" style="text-align: center;">
        <p style="color: var(--color-text-muted);">This list doesn't have any entries yet.</p>
    </div>
    {% endif %}
</section>

<section class="cta-section">
    <h2 class="cta-section-title">Want to create your own lists?</h2>
    <p class="cta-section-text">
        Download Border Badge to track your travels and share public recommendations with friends.
    </p>
    <a href="{{ app_store_url or '#download' }}" class="cta-button cta-button--large">
        Get Border Badge
    </a>
</section>
{% endblock %}
